{"ast":null,"code":"import axios from 'axios';\nconst initialState = {\n  client: [{\n    _id: '',\n    titre: '',\n    description: '',\n    prix: '',\n    date: '',\n    debut: '',\n    duree: '',\n    reserve: '',\n    disponible: '',\n    image: '',\n    active: '',\n    utilisateur: ''\n  }]\n};\n\nfunction connexion(state = initialState, action) {\n  let nextState = [0];\n\n  switch (action.type) {\n    //postAdmin 8080\n    case 'REGISTER':\n      axios.post('https://tsiorytahback.herokuapp.com/register', action.value) // axios.post('http://localhost:8080/register/', action.value)\n      .then(response => {\n        localStorage.setItem('id', parseInt(response.data._id));\n        localStorage.setItem('user', response.data.nom);\n        localStorage.setItem('login', 'true');\n      });\n      break;\n\n    case 'EDIT_PROFIL':\n      axios.put('https://tsiorytahback.herokuapp.com/register/' + localStorage.getItem('id'), action.value) // axios.put(\"http://localhost:8080/register/\" + localStorage.getItem('id'), action.value)\n      .then(response => {\n        localStorage.setItem('user', response.data[localStorage.getItem('id')].nom);\n      });\n      break;\n\n    case 'DELETE_PROFIL':\n      axios.delete('https://tsiorytahback.herokuapp.com/register/' + localStorage.getItem('id'), action.value) // axios.put(\"http://localhost:8080/register/\" + localStorage.getItem('id'), action.value)\n      .then(response => {\n        localStorage.setItem('id', 'none');\n        localStorage.setItem('user', 'none');\n      });\n      break;\n    //postLogin 8080\n\n    case 'LOGIN':\n      axios.post('https://tsiorytahback.herokuapp.com/login/', action.value) // axios.post('http://localhost:8080/login', action.value)\n      .then(response => {\n        if (response.data.nom == action.value.nom) {\n          localStorage.setItem('id', response.data._id);\n          localStorage.setItem('user', response.data.nom);\n          localStorage.setItem('login', 'true');\n        }\n      });\n      break;\n\n    case 'DECONNECT':\n      localStorage.setItem('id', 'none');\n      localStorage.setItem('user', 'none');\n      localStorage.setItem('login', 'false');\n      break;\n\n    case 'GETARTICLE':\n      axios.get('https://tsiorytahback.herokuapp.com/profil') // axios.get('http://localhost:8080/')\n      .then(function (response) {\n        nextState = response.data;\n        return nextState;\n      });\n      break;\n\n    case 'UPDATE_ARTICLE':\n      axios.put('https://tsiorytahback.herokuapp.com/profil', action.value) // axios.put('http://localhost:8080/profil/', action.value)\n      .then(response => {\n        console.log(\"put action: \", action.value);\n      });\n      break;\n\n    case 'DELETE_ARTICLE':\n      axios.delete('https://tsiorytahback.herokuapp.com/profil/' + action.value._id, action.value) // axios.post('http://localhost:8080/register/', action.value)\n      .then(response => {\n        console.log(\"delete action: \", action.value);\n      });\n      break;\n\n    default:\n      return state;\n  }\n}\n\nexport default connexion;","map":{"version":3,"sources":["/home/dev/Bureau/EXAMEN/testSIMPLON_front/src/store/reducer/reducer_admin.js"],"names":["axios","initialState","client","_id","titre","description","prix","date","debut","duree","reserve","disponible","image","active","utilisateur","connexion","state","action","nextState","type","post","value","then","response","localStorage","setItem","parseInt","data","nom","put","getItem","delete","get","console","log"],"mappings":"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","sourcesContent":["import axios from 'axios'\n\nconst initialState = {\n  client: [{\n    _id: '',\n    titre: '',\n    description: '',\n    prix: '',\n    date: '',\n    debut: '',\n    duree: '',\n    reserve: '',\n    disponible: '',\n    image: '',\n    active: '',\n    utilisateur: ''\n  }]\n}\n\nfunction connexion(state = initialState, action) {\n  let nextState = [0]\n  switch (action.type) {\n\n    //postAdmin 8080\n    case 'REGISTER':\n      axios.post('https://tsiorytahback.herokuapp.com/register', action.value)\n        // axios.post('http://localhost:8080/register/', action.value)\n        .then((response) => {\n          localStorage.setItem('id', parseInt(response.data._id))\n          localStorage.setItem('user', response.data.nom)\n          localStorage.setItem('login', 'true')\n        })\n      break;\n\n    case 'EDIT_PROFIL':\n      axios.put('https://tsiorytahback.herokuapp.com/register/' + localStorage.getItem('id'), action.value)\n        // axios.put(\"http://localhost:8080/register/\" + localStorage.getItem('id'), action.value)\n        .then((response) => {\n          localStorage.setItem('user', response.data[localStorage.getItem('id')].nom)\n        })\n      break;\n\n    case 'DELETE_PROFIL':\n      axios.delete('https://tsiorytahback.herokuapp.com/register/' + localStorage.getItem('id'), action.value)\n        // axios.put(\"http://localhost:8080/register/\" + localStorage.getItem('id'), action.value)\n        .then((response) => {\n          localStorage.setItem('id', 'none')\n          localStorage.setItem('user', 'none')\n        })\n      break;\n\n    //postLogin 8080\n    case 'LOGIN':\n      axios.post('https://tsiorytahback.herokuapp.com/login/', action.value)\n        // axios.post('http://localhost:8080/login', action.value)\n        .then((response) => {\n          if (response.data.nom == action.value.nom) {\n            localStorage.setItem('id', response.data._id)\n            localStorage.setItem('user', response.data.nom)\n            localStorage.setItem('login', 'true')\n          }\n        })\n      break;\n\n    case 'DECONNECT':\n      localStorage.setItem('id', 'none')\n      localStorage.setItem('user', 'none')\n      localStorage.setItem('login', 'false');\n      break;\n\n\n\n    case 'GETARTICLE':\n      axios.get('https://tsiorytahback.herokuapp.com/profil')\n        // axios.get('http://localhost:8080/')\n        .then(function (response) {\n          nextState = response.data\n          return nextState\n        })\n      break;\n\n\n    case 'UPDATE_ARTICLE':\n      axios.put('https://tsiorytahback.herokuapp.com/profil', action.value)\n        // axios.put('http://localhost:8080/profil/', action.value)\n        .then((response) => {\n          console.log(\"put action: \", action.value);\n        })\n      break;\n\n    case 'DELETE_ARTICLE':\n      axios.delete('https://tsiorytahback.herokuapp.com/profil/' + action.value._id, action.value)\n        // axios.post('http://localhost:8080/register/', action.value)\n        .then((response) => {\n          console.log(\"delete action: \", action.value);\n        })\n      break;\n\n    default:\n      return state\n  }\n}\n\nexport default connexion\n"]},"metadata":{},"sourceType":"module"}