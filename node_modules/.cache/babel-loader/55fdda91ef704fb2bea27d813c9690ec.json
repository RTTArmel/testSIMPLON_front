{"ast":null,"code":"var _jsxFileName = \"/home/dev/Bureau/Pr\\xE9-testSIMPLON/pre-test_front/src/components/postupload.js\";\nimport React, { Component } from 'react';\nimport { MDBContainer, MDBInput, MDBBtn, MDBModal, MDBModalBody, MDBModalHeader, MDBModalFooter } from 'mdbreact';\nimport { Redirect } from 'react-router-dom';\n\nclass PostFrontToBack extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.renderRedirect = () => {\n      return React.createElement(Redirect, {\n        to: \"/login\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 23\n        },\n        __self: this\n      });\n    };\n\n    this.toggle = () => {\n      this.handleUploadImage();\n      this.setState({\n        modal: !this.state.modal,\n        titre: '',\n        description: '',\n        prix: '',\n        image: ''\n      });\n      this.renderRedirect();\n    };\n\n    this.state = {\n      titre: '',\n      description: '',\n      prix: '',\n      image: '',\n      modal: false\n    };\n    this.handleChange = this.handleChange.bind(this);\n    this.handleUploadImage = this.handleUploadImage.bind(this);\n    this.renderRedirect = this.renderRedirect.bind(this);\n  }\n\n  handleChange(event) {\n    this.setState({\n      [event.target.name]: event.target.value\n    });\n  }\n\n  handleUploadImage(ev) {\n    const data = new FormData();\n    data.append('image', this.uploadInput.files[0]);\n    data.append('titre', this.state.titre);\n    data.append('description', this.state.description);\n    data.append('prix', this.state.prix);\n    fetch('http://localhost:8080/profil', {\n      method: 'POST',\n      body: data\n    }).then(response => {\n      response.json().then(body => {\n        this.setState({\n          image: \"http://localhost:8080/profil/\".concat(body.image)\n        });\n        console.log('ity ilay body.fil', body.image);\n      });\n    });\n  }\n\n  render() {\n    return React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 65\n      },\n      __self: this\n    }, \" \", React.createElement(\"div\", {\n      class: \"card\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 67\n      },\n      __self: this\n    }, React.createElement(\"h5\", {\n      class: \"card-header info-color white-text text-center\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 69\n      },\n      __self: this\n    }, React.createElement(\"strong\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 70\n      },\n      __self: this\n    }, \"NOUVEAU PRODUIT\")), React.createElement(\"div\", {\n      class: \"card-body\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 73\n      },\n      __self: this\n    }, React.createElement(\"form\", {\n      class: \"text\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 75\n      },\n      __self: this\n    }, React.createElement(MDBInput, {\n      label: \"Nom du Produit\",\n      icon: \"cart-arrow-down\",\n      id: \"un\",\n      type: \"text\",\n      className: \"input black-text\",\n      name: \"titre\",\n      value: this.state.value,\n      onChange: this.handleChange,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 77\n      },\n      __self: this\n    }), React.createElement(MDBInput, {\n      label: \"Descriptions\",\n      size: \"lg\",\n      icon: \"pencil-alt\",\n      id: \"ml\",\n      type: \"textarea\",\n      rows: \"3\",\n      className: \"input black-text\",\n      name: \"description\",\n      value: this.state.value,\n      onChange: this.handleChange,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 78\n      },\n      __self: this\n    }), React.createElement(MDBInput, {\n      label: \"Prix\",\n      size: \"lg\",\n      icon: \"hand-holding-usd\",\n      id: \"pw\",\n      type: \"number\",\n      className: \"input black-text\",\n      name: \"prix\",\n      value: this.state.value,\n      onChange: this.handleChange,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 79\n      },\n      __self: this\n    }), React.createElement(\"input\", {\n      ref: ref => {\n        this.uploadInput = ref;\n      },\n      type: \"file\",\n      name: \"image\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 80\n      },\n      __self: this\n    }))), React.createElement(MDBContainer, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 84\n      },\n      __self: this\n    }, React.createElement(MDBBtn, {\n      onClick: this.toggle,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 85\n      },\n      __self: this\n    }, \"Ajouter\"), React.createElement(MDBModal, {\n      isOpen: this.state.modal,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 86\n      },\n      __self: this\n    }, React.createElement(MDBModalHeader, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 87\n      },\n      __self: this\n    }, \"Enregistrement...\"), React.createElement(MDBModalBody, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 88\n      },\n      __self: this\n    }, React.createElement(\"center\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 88\n      },\n      __self: this\n    }, \"Ajout du Produit avec succ\\xE9s\")), React.createElement(MDBModalFooter, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 89\n      },\n      __self: this\n    }, React.createElement(MDBBtn, {\n      color: \"secondary\",\n      onClick: this.toggle,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 90\n      },\n      __self: this\n    }, \"Close\"))))));\n  }\n\n}\n\nexport default PostFrontToBack;","map":{"version":3,"sources":["/home/dev/Bureau/Pré-testSIMPLON/pre-test_front/src/components/postupload.js"],"names":["React","Component","MDBContainer","MDBInput","MDBBtn","MDBModal","MDBModalBody","MDBModalHeader","MDBModalFooter","Redirect","PostFrontToBack","constructor","props","renderRedirect","toggle","handleUploadImage","setState","modal","state","titre","description","prix","image","handleChange","bind","event","target","name","value","ev","data","FormData","append","uploadInput","files","fetch","method","body","then","response","json","console","log","render","ref"],"mappings":"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","sourcesContent":["\nimport React, { Component } from 'react';\nimport { MDBContainer, MDBInput, MDBBtn, MDBModal, MDBModalBody, MDBModalHeader, MDBModalFooter } from 'mdbreact';\nimport { Redirect } from 'react-router-dom'\n\nclass PostFrontToBack extends React.Component {\n    constructor(props) {\n        super(props);\n\n        this.state = {\n            titre: '',\n            description: '',\n            prix: '',\n            image: '',\n            modal: false\n        };\n        this.handleChange = this.handleChange.bind(this)\n        this.handleUploadImage = this.handleUploadImage.bind(this);\n        this.renderRedirect = this.renderRedirect.bind(this)\n    }\n\n    renderRedirect = () => {\n          return <Redirect to='/login' />\n      }\n\n    toggle = () => {\n        this.handleUploadImage()\n        this.setState({\n            modal: !this.state.modal,\n            titre: '',\n            description: '',\n            prix: '',\n            image: ''\n        });\n        this.renderRedirect()\n    }\n\n    handleChange(event) {\n        this.setState({\n            [event.target.name]: event.target.value\n        })\n    }\n\n    handleUploadImage(ev) {\n        const data = new FormData();\n        data.append('image', this.uploadInput.files[0]);\n        data.append('titre', this.state.titre);\n        data.append('description', this.state.description);\n        data.append('prix', this.state.prix)\n\n        fetch('http://localhost:8080/profil', {\n            method: 'POST',\n            body: data,\n        }).then((response) => {\n            response.json().then((body) => {\n                this.setState({ image: `http://localhost:8080/profil/${body.image}` });\n                console.log('ity ilay body.fil', body.image);\n            });\n        });\n    }\n\n    render() {\n        return (\n\n            <div> {/* //DEBUT */}\n\n                <div class=\"card\">\n\n                    <h5 class=\"card-header info-color white-text text-center\">\n                        <strong>NOUVEAU PRODUIT</strong>\n                    </h5>\n\n                    <div class=\"card-body\">\n\n                        <form class=\"text\">\n\n                            <MDBInput label=\"Nom du Produit\" icon=\"cart-arrow-down\" id=\"un\" type=\"text\" className=\"input black-text\" name=\"titre\" value={this.state.value} onChange={this.handleChange} />\n                            <MDBInput label=\"Descriptions\" size=\"lg\" icon=\"pencil-alt\" id=\"ml\" type=\"textarea\" rows=\"3\" className=\"input black-text\" name=\"description\" value={this.state.value} onChange={this.handleChange} />\n                            <MDBInput label=\"Prix\" size=\"lg\" icon=\"hand-holding-usd\" id=\"pw\" type=\"number\" className=\"input black-text\" name=\"prix\" value={this.state.value} onChange={this.handleChange} />\n                            <input ref={(ref) => { this.uploadInput = ref; }} type=\"file\" name=\"image\" />\n                            {/* <MDBBtn class=\"btn btn-outline-info btn-rounded btn-block my-4 waves-effect z-depth-0\" data-toggle=\"modal\" data-target=\"#modalLoginForm\" type=\"submit\">Publier</MDBBtn> */}\n                        </form>\n                    </div>\n                    <MDBContainer>\n                        <MDBBtn onClick={this.toggle}>Ajouter</MDBBtn>\n                        <MDBModal isOpen={this.state.modal}>\n                            <MDBModalHeader>Enregistrement...</MDBModalHeader>\n                            <MDBModalBody><center>Ajout du Produit avec succés</center></MDBModalBody>\n                            <MDBModalFooter>\n                                <MDBBtn color=\"secondary\" onClick={this.toggle}>Close</MDBBtn>\n                            </MDBModalFooter>\n                        </MDBModal>\n                    </MDBContainer>\n                </div>\n            </div>\n        );\n    }\n}\n\nexport default PostFrontToBack;\n"]},"metadata":{},"sourceType":"module"}